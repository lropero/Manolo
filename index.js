const chalk = require('chalk')
const { cross } = require('figures')

const { Tournament } = require('./classes')
const { errorToString } = require('./utils')

const run = async ({ config, logger, playerNames }) => {
  try {
    const tournament = await Tournament.initialize({ config, logger, playerNames })
    tournament.run()
  } catch (error) {
    logger(`${chalk.red(cross)} ${errorToString({ error })}`)
    process.exit(0)
  }
}

const config = {
  levels: [
    [5, 25, 50, 20], // ante, small blind, big blind, average number of hands required to increase level
    [6, 30, 60, 20],
    [8, 40, 80, 20],
    [10, 50, 100, 20],
    [12, 60, 120, 20],
    [16, 80, 160, 20],
    [20, 100, 200, 20],
    [25, 125, 250, 20],
    [30, 150, 300, 20],
    [40, 200, 400, 20],
    [50, 250, 500, 20],
    [60, 300, 600, 20],
    [80, 400, 800, 20],
    [100, 500, 1000, 20],
    [120, 600, 1200, 20],
    [160, 800, 1600, 20],
    [200, 1000, 2000, 20],
    [240, 1200, 2400, 20],
    [280, 1400, 2800, 20],
    [320, 1600, 3200, 20],
    [360, 1800, 3600, 20],
    [400, 2000, 4000, 20],
    [500, 2500, 5000, 20],
    [600, 3000, 6000, 20],
    [700, 3500, 7000, 20],
    [800, 4000, 8000, 20],
    [900, 4500, 9000, 20],
    [1000, 5000, 10000, 20],
    [1200, 6000, 12000, 20],
    [1600, 8000, 16000, 20],
    [2000, 10000, 20000, 20],
    [2500, 12500, 25000, 20],
    [3000, 15000, 30000, 20],
    [3500, 17500, 35000, 20],
    [4000, 20000, 40000, 20],
    [5000, 25000, 50000, 20],
    [6000, 30000, 60000, 20],
    [7000, 35000, 70000, 20],
    [8000, 40000, 80000, 20],
    [9000, 45000, 90000, 20],
    [10000, 50000, 100000, 20],
    [12000, 60000, 120000, 20],
    [16000, 80000, 160000, 20],
    [20000, 100000, 200000, 20],
    [25000, 125000, 250000, 20],
    [30000, 150000, 300000, 20],
    [35000, 175000, 350000, 20],
    [40000, 200000, 400000, 20],
    [50000, 250000, 500000, 20],
    [60000, 300000, 600000, 20],
    [70000, 350000, 700000, 20],
    [80000, 400000, 800000, 20],
    [90000, 450000, 900000, 20],
    [100000, 500000, 1000000, 20],
    [120000, 600000, 1200000, 20],
    [160000, 800000, 1600000, 20],
    [200000, 1000000, 2000000, 20],
    [250000, 1250000, 2500000, 20],
    [300000, 1500000, 3000000, 20],
    [350000, 1750000, 3500000, 20],
    [400000, 2000000, 4000000, 20],
    [500000, 2500000, 5000000, 20],
    [600000, 3000000, 6000000, 20],
    [700000, 3500000, 7000000, 20],
    [800000, 4000000, 8000000, 20],
    [900000, 4500000, 9000000, 20],
    [1000000, 5000000, 10000000, 20],
    [1200000, 6000000, 12000000, 20],
    [1600000, 8000000, 16000000, 20],
    [2000000, 10000000, 20000000, 20],
    [2500000, 12500000, 25000000, 20],
    [3000000, 15000000, 30000000, 20],
    [3500000, 17500000, 35000000, 20],
    [4000000, 20000000, 40000000, 20],
    [5000000, 25000000, 50000000, 20],
    [6000000, 30000000, 60000000, 20],
    [7000000, 35000000, 70000000, 20],
    [8000000, 40000000, 80000000, 20],
    [9000000, 45000000, 90000000, 20],
    [10000000, 50000000, 100000000]
  ],
  playersPerTable: 9,
  startingChips: 10000
}
const logger = console.log // Winston?
const playerNames = new Array(135).fill('').map((player, index) => `player${index + 1}`)
run({ config, logger, playerNames })
